# git clone repo
cd
mkdir project
cd project
git clone https://github.com/WJakubowsk/BigDataProject.git

# conda installation (in root dir)
cd ~
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
chmod +x Miniconda3-latest-Linux-x86_64.sh
sh Miniconda3-latest-Linux-x86_64.sh # yes/enter to all question
source ~/.bashrc  

# conda environment create from yaml file - from scripts/ dir
cd /home/vagrant/project/BigDataProject/scripts
conda env create -f environment.yml

# download jq for API filtering
sudo apt update
sudo apt install jq --yes

# hdfs create directories
hdfs dfs -mkdir /user/vagrant/project
hdfs dfs -mkdir /user/vagrant/project/nifi_in
hdfs dfs -mkdir /user/vagrant/project/nifi_in/api

# hbase initialize thrift & zookeeper server
. /usr/local/hbase/bin/hbase thrift &
sudo -- sh -c 'export JAVA_HOME=/usr/local/java && 
/usr/local/hbase/bin/start-hbase.sh'
sudo -- sh -c 'export JAVA_HOME=/usr/local/java && 
/usr/local/hbase/bin/hbase-daemon.sh start regionserver'

# make bash scripts executable
directory="/home/vagrant/project/BigDataProject/scripts"
if [ -d "$directory" ]; then
    for file in "$directory"/*; do
        if [ -f "$file" ] && [ "${file: -3}" == ".sh" ]; then
            chmod +x "$file"
        fi
    done
else
    echo "Directory '$directory' does not exist."
fi